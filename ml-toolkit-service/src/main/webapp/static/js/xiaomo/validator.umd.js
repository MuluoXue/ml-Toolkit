!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).validator={})}(this,(function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function l(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}"function"==typeof SuppressedError&&SuppressedError;var a=function(e){return Object.prototype.toString.call(e)},o=function(e){return"[object Object]"===a(e)},i=function(e){return/^\d+$/.test(e+"")},l=function(e){return/^\d+\.\d+$/.test(e+"")},u=function(e){return"[object Promise]"===a(e)},c=function(e){return Array.isArray(e)?0===e.length:o(e)?0===Object.keys(e).length:["[object Set]","[object Map]"].includes(a(e))?0===e.size:[null,void 0,""].includes(e)},s=function(e,t){throw"[".concat(function(e){return e.replace(/(-\w)/g,(function(e){return e.substr(1,1).toUpperCase()})).replace(/^(\w)/,(function(e){return e.toUpperCase()}))}(e),"]: ").concat(t)},d={required:{validator:function(e){return!c(e)}},email:{validator:function(e){return!e||/^(\w+|\w+(\.\w+))+@(\w+\.)+\w+$/.test(e)}},length:{validator:function(e,t){return!e||e.length===+t}},max:{validator:function(e,t){return!!c(e)||e<parseFloat(t)}},min:{validator:function(e,t){return!!c(e)||e>parseFloat(t)}},number:{validator:function(e){return i(t=e)||l(t);var t}},integer:{validator:function(e){return i(e)}},float:{validator:function(e){return l(e)}},between:{paramsEnum:[{name:"min"},{name:"max"}],validator:function(e,t){return void 0===t&&(t=[]),!!c(e)||e>=Number(t[0])&&e<=Number(t[1])}},confirmed:{validator:function(e,t,r){var n;if(!e)return!0;var a=null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.find((function(e){return e.dataKey===t}));return e===(null==a?void 0:a.value)}},alpha:{validator:function(e){return/^[a-z]*$/i.test(e)}},alpha_num:{validator:function(e){return/^[a-z\d]*$/i.test(e)}},alpha_spaces:{validator:function(e){return/^[a-z\s]*$/i.test(e)}},url:{validator:function(e){return/^https?:\/\/(\w+\.)+\w+(:\d+)?([?\/]\S*)?$/i.test(e)}}},f=function(){function e(){var e=this;this.locale=null,this.validateModel=new Map,this.localize=function(t){return e.locale=t.message,e.resolveDefaultRules(),e},this.extend=function(t,r){return e.validateModel.set(t,r),e},this.extends=function(t){for(var r=0,n=Object.entries(t);r<n.length;r++){var a=n[r],o=a[0],i=a[1];e.extend(o,i)}return e},this.resolveDefaultRules=function(){e.locale||s("validator","未注册国际化词条，参考链接：https://github.com/D-xuanmo/validator#%E4%BD%BF%E7%94%A8");for(var t=0,r=Object.entries(d);t<r.length;t++){var n=r[t],a=n[0],o=n[1];e.extend(a,{message:e.locale[a],validator:o.validator,paramsEnum:o.paramsEnum})}},this.convertData=function(e){return o(e)?Object.keys(e).map((function(r){return t({name:r},e[r])})):e},this.validate=function(t,a){return new Promise((function(i,l){r(e,void 0,void 0,(function(){var e,r,u,s,d,f,p,v,h,b,m,y,g;return n(this,(function(n){switch(n.label){case 0:e=(null!=a?a:{}).checkAll,r=void 0===e||e,u={},s=this.convertData(t),d=0,n.label=1;case 1:return d<s.length?(f=s[d],p=f.dataKey,v=f.value,h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(f,["value"]),b=null!==(g=f.label)&&void 0!==g?g:p,m=void 0,f.required&&c(v)?(m=this.formatMessage(this.validateModel.get("required").message,b),[3,6]):[3,2]):[3,8];case 2:return h.regexp||h.validator?[4,this.scopeValidateHandler(v,h,{data:s})]:[3,4];case 3:return m=n.sent(),[3,6];case 4:return[4,this.validateHandler(v,b,h,{data:s})];case 5:m=n.sent(),n.label=6;case 6:this.isValidateFail(m)&&(r||l(((y={})[p]=m,y)),u[p]=m),n.label=7;case 7:return d++,[3,1];case 8:return r&&o(u)&&!c(u)&&l(u),i(!0),[2]}}))}))}))}}return e.prototype.isValidateFail=function(e){return!0!==e},e.prototype.parseRule=function(e){return null==e?void 0:e.split("|")},e.prototype.formatMessage=function(e,t,r,n){var a=e.replace(/\{#field}/gi,t);return Array.isArray(r)&&(c(n)&&s("validator","The {".concat(t,"} field validation rule parameter is not defined.")),r.forEach((function(e,t){a=a.replace(new RegExp("\\{".concat(n[t].name,"}")),e)}))),"string"==typeof r&&(a=a.replace(/\{[a-z]+}/i,r)),a},e.prototype.regexpValidateHandler=function(e,t){return!e||new RegExp(t).test(e)},e.prototype.formatRuleParams=function(e){return e&&e.includes(",")?e.split(","):e},e.prototype.scopeValidateHandler=function(e,t,a){var o,i;return r(this,void 0,void 0,(function(){var r;return n(this,(function(n){switch(n.label){case 0:return r=!0,t.regexp&&(r=this.regexpValidateHandler(e,t.regexp)),t.validator?(r=null===(o=t.validator)||void 0===o?void 0:o.call(t,e,a),u(r)?[4,null===(i=t.validator)||void 0===i?void 0:i.call(t,e,a)]:[3,2]):[3,2];case 1:r=n.sent(),n.label=2;case 2:return r?[2,!0]:[2,t.message]}}))}))},e.prototype.validateHandler=function(e,t,a,o){var i,l;return r(this,void 0,void 0,(function(){var r,c,d,f,p,v,h,b,m;return n(this,(function(n){switch(n.label){case 0:if(r=this.parseRule(a.rules),c=null,!r)return[3,6];d=0,n.label=1;case 1:return d<r.length?(f=r[d],p=f.split(":"),v=p[0],h=p[1],(b=this.validateModel.get(v))||s("validator","{".concat(v,"} rule not registered.")),m=!0,b.regexp&&(m=this.regexpValidateHandler(e,b.regexp)),b.validator?(m=null===(i=b.validator)||void 0===i?void 0:i.call(b,e,this.formatRuleParams(h),o),u(m)?[4,null===(l=b.validator)||void 0===l?void 0:l.call(b,e,this.formatRuleParams(h),o)]:[3,3]):[3,3]):[3,5];case 2:m=n.sent(),n.label=3;case 3:if(!m)return c=this.formatMessage(b.message,t,this.formatRuleParams(h),b.paramsEnum),[3,5];n.label=4;case 4:return d++,[3,1];case 5:return[2,null===c||c];case 6:return[2,!0]}}))}))},e}(),p=new f;e.Validator=f,e.default=p,e.validator=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=validator.umd.js.map